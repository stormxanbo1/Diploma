Ниже — сквозное описание того, как ваше приложение будет работать «изнутри», какие основные бизнес-процессы оно покрывает и что в нём могут делать разные пользователи. После этого подробнее — про административную панель (Admin UI).

---

## 1. Общее назначение и главные модули

Ваше приложение — монолитный бэкенд для веб-интерфейса управления дополнительными задачами/проектами коллектива, расписаниями и учебными ресурсами в учебном заведении.

**Основные модули:**

1. **Аутентификация и авторизация** (JWT + роли)
2. **Управление пользователями и группами**
3. **Управление ресурсами** (каталоги, формы, учебные материалы)
4. **Проекты и задачи** (создание, назначение, статус, вес, приоритет, комментарии, файлы)
5. **Расписания** (ввод и просмотр занятий)
6. **Уведомления** (внутренние напоминания и системные сообщения)
7. **Статистика и отчёты**

Все операции доступны через REST-эндпоинты, а фронтенд на Vue 3 реализует UI поверх этих API.

---

## 2. Сквозные бизнес-процессы

### 2.1 Регистрация и вход

* Новый пользователь (студент или сотрудник) сам регистрируется через `/auth/register`.
* Админ может зарегистрировать/удалить пользователя вручную.
* После входа (`/auth/login`) пользователь получает access/refresh токены и попадает на свой Dashboard.

### 2.2 Управление правами доступа

* По JWT внутри каждого запроса проверяется роль (`ROLE_ADMIN`, `ROLE_STAFF`, `ROLE_TEACHER`, `ROLE_STUDENT`).
* Spring Security блокирует любые попытки обратиться к чужим данным или к запрещённым разделам (403).

### 2.3 Проекты и задачи

* **Создание проекта**: STAFF и ADMIN могут задать заголовок, описание, дедлайн, категорию и участников.
* **Создание задачи**: STAFF, ADMIN (и TEACHER, если участник проекта) создаёт задачу с приоритетом, весом, дедлайном, описанием, привязывает к проекту или оставляет без проекта.
* **Назначение исполнителей**: список `assignees` — пользователи, которые должны выполнить задачу.
* **Работа с задачей**: исполнитель меняет статус (TODO → IN\_PROGRESS → DONE или ON\_HOLD), оставляет комментарии, прикладывает файлы.
* **Автоматические напоминания**: за 24 ч до дедлайна всем `assignee`-пользователям создаётся внутренняя Notification.

### 2.4 Расписания и учебные материалы

* **Расписания** вводятся вручную администратором: группу, преподавателя, предмет, дату/время, локацию.
* **Просмотр**: студенты и преподаватели смотрят своё (или назначенное) расписание на выбранный день.
* **Учебные ресурсы**: админ загружает формы и материалы (PDF, DOCX и т. п.) в Minio; пользователи с правами (TEACHER, STUDENT) могут их скачивать.

### 2.5 Внутренние уведомления

* **Типы**: напоминание о дедлайне, изменение расписания, административные сообщения.
* **Отображение**: фронтенд делает страницу “Notifications”, где пользователь видит список уведомлений, может пометить прочитанными.
* **Flow**: в момент события (например, изменение расписания) в базе создаётся соответствующий Notification; пользователю приходит счётчик новых сообщений.

### 2.6 Статистика и отчёты

* **Отчёт по задачам**: за период выдаётся число созданных/закрытых задач, среднее время выполнения, суммарный вес.
* **Отчёт по активности**: число действий (создание/редактирование/удаление) по группам или пользователям.
* ADMIN видит глобальные отчёты, STAFF — только по своим проектам/задачам.

---

## 3. Детали работы ролей

| Роль        | Основные возможности                                                                                                        |
| ----------- | --------------------------------------------------------------------------------------------------------------------------- |
| **ADMIN**   | Управление всеми пользователями, группами, ресурсами, проектами, задачами, расписанием, отчётами и уведомлениями.           |
| **STAFF**   | CRUD своих проектов и задач; просмотр статистики по своим задачам; получение напоминаний.                                   |
| **TEACHER** | Просмотр и фильтрация расписания; загрузка/скачивание материалов; выполнение/комментирование задач в проектах; уведомления. |
| **STUDENT** | Просмотр своего расписания; скачивание материалов и форм; просмотр и отметка выполнения назначенных задач; уведомления.     |

> Любая попытка выйти за рамки прав — 403 Forbidden + уведомление в UI.

---

## 4. Административная панель (Admin UI) — подробности

Админка — это набор разделов с таблицами, формами и контролем доступа к каждому типу данных.

### 4.1 Dashboard

* **Карточки-счётчики**:

  * Всего пользователей
  * Активных проектов
  * Открытых задач
  * Непрочитанных уведомлений
* **Ссылки-быстрый переход** к ключевым разделам.

### 4.2 Users Management

* **Список**: таблица с колонками

  * ID, Username, Email, Роли (мультивыбор), Группа, Отдел, Статус
  * Кнопки «Edit», «Delete»
* **Создание/Редактирование**: модальная форма с валидацией по email/паролю, multiselect ролей и групп.
* **Удаление**: подтверждение в модальном окне.

### 4.3 Groups Management

* **Список групп**: ID, Название, Число участников, Действия.
* **Форма Create/Edit**: ввод имени, multiselect участников (по username/email).

### 4.4 Resources Management

* **Список ресурсов**:

  * ID, Название, Тип (каталог/форма), URL, Доступные роли, Доступные группы
* **Форма Create/Edit**: выбор типа, ввод URL, multiselect ролей и групп, привязка к материалам.
* **Attachments**: для каждого ресурса можно загружать файлы через отдельный раздел.

### 4.5 Projects & Tasks

* **Projects**:

  * Таблица: ID, Название, Владелец, Дедлайн, Категория, Участники, Действия.
  * Форма Create/Edit: Title, Description, Deadline, Category, Participants.
* **Tasks**:

  * Таблица: ID, Название, Статус, Приоритет, Владелец, Дедлайн, Assignees, Действия.
  * Форма Create/Edit: все поля + multiselect assignees + привязка к проекту.
  * **Комментарии и вложения**: доступны через кнопки во всплывающих модалках или на отдельной странице задачи.

### 4.6 Schedule Management

* **Список расписаний**: ID, Группа, Преподаватель, Subject, Дата/Время, Локация, Действия.
* **Форма Create/Edit**: выбор группы, преподавателя, предмета, дата-время, текст локации.

### 4.7 Notifications

* **Список**:

  * Checkbox (для массового чтения), Тип уведомления, Содержимое (payload), Дата создания, Статус (прочитано/непрочитано).
  * Кнопки «Mark as Read», «Delete» (опционально).
* **Создание**: админ может отправить «ADMIN\_MESSAGE» любому пользователю или группе.

### 4.8 Reports

* **Панель фильтров**: Date From, Date To, Group/Project/Role (опционально).
* **Кнопки**: «Generate Tasks Report», «Generate Activity Report».
* **Вывод**: таблицы и графики (фронтенд преобразует JSON-данные в диаграммы).

---

## 5. Итоговая картина

В результате вы получаете единое веб-приложение, где:

* **Администратор** управляет всем контентом, настройками и пользователями.
* **Сотрудники (Staff)** планируют и выполняют дополнительные задачи/проекты, получают напоминания и смотрят отчёты.
* **Преподаватели (Teacher)** ведут расписание, загружают материалы, участвуют в проектах.
* **Студенты (Student)** получают расписание, скачивают ресурсы и отмечают выполнение своих задач.

Вся бизнес-логика чётко разделена по ролям, заявки на регистрацию автоматически распределяются, дедлайны не пропускаются благодаря уведомлениям, а отчёты дают прозрачную статистику по эффективности работы коллектива.
